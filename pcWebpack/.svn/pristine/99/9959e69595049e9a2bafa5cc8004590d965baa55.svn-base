// 码头总览
<template>
  <article id="div-body" class="d-pubBody">
    <div class="aui-flex-col d-shipOverview">
      <div class="aui-flex-item-4">
        <!-- 时钟 -->
        <div class="aui-flex-col d-shipOver-date">
          <div class="aui-flex-item-7 aui-flex-row aui-flex-middle aui-flex-center">
            <c-clock-row></c-clock-row>
          </div>
          <div
            class="aui-flex-item-5 aui-flex-col aui-flex-middle aui-flex-center"
            v-if="weatherInfo"
          >
            <div class="aui-flex-item-4 aui-flex-col aui-flex-center d-wericon">
              <i class="iconfont" :class="weatherIcon(weatherInfo)"></i>
            </div>
            <div class="aui-flex-item-8 aui-flex-col aui-flex-center">
              <div class="d-wertxt">{{weatherInfo.WeatherTypeCaption}}</div>
              <div
                class="d-wealight"
                v-if="weatherInfo.MinTemp && weatherInfo.MaxTemp != '' "
              >{{weatherInfo.MinTemp}}~{{weatherInfo.MaxTemp}}℃</div>
            </div>
          </div>
        </div>

        <!-- 工班可视化 -->
        <div class="aui-padded-15 d-shipOver-gangs">
          <div class="d-height-100">
            <section class="d-overview-hd">
              <div class="aui-flex-col aui-flex-middle aui-margin-b-10">
                <div class="aui-flex-item-7 d-chartname">本工班出勤/派工</div>
                <div class="aui-flex-item-5 aui-flex-col aui-flex-right">
                  <strong class="d-font-size-16">{{results.DutyTotal}}/{{results.DispatchTotal}}</strong>
                </div>
              </div>
              <div class="d-chartline">
                <div class="d-chartcolor"></div>
              </div>
            </section>
            <div class="aui-flex-col d-echart-gangs" id="echart-gangsH">
              <div class="aui-flex-item-7 d-height-100">
                <div id="piegangs" style="height: 100%;box-sizing: border-box;"></div>
              </div>
              <div
                class="aui-flex-item-5 aui-flex-col aui-flex-center aui-flex-middle d-echart-legend d-height-100"
              >
                <ul class="aui-flex-row aui-flex-middle" v-if="DispatchNumberList && DispatchNumberList.length>0">
                  <li
                    v-for="(post,i) in DispatchNumberList"
                    :key="i"
                    class="aui-flex-item-12 aui-flex-col aui-flex-middle"
                  >
                    <div class="aui-flex-auto aui-flex-col aui-flex-center">
                      <span class="d-square" :class="postClass(post)"></span>
                    </div>
                    <div class="aui-flex-item-7">
                      <span
                        class="d-font-size-18"
                        v-if="post.StaticType == 0"
                        style="font-weight: normal;"
                      >值班经理</span>
                      <span
                        class="d-font-size-18"
                        v-if="post.StaticType == 1"
                        style="font-weight: normal;"
                      >值班班长</span>
                      <span
                        class="d-font-size-18"
                        v-if="post.StaticType == 4"
                        style="font-weight: normal;"
                      >前台理货长</span>
                      <span
                        class="d-font-size-18"
                        v-if="post.StaticType == 5"
                        style="font-weight: normal;"
                      >后台理货长</span>
                      <span
                        class="d-font-size-18"
                        v-if="post.StaticType == 7"
                        style="font-weight: normal;"
                      >操作员</span>
                      <span
                        class="d-font-size-18"
                        v-if="post.StaticType == 99"
                        style="font-weight: normal;"
                      >其他</span>
                    </div>
                    <div class="aui-flex-item-3">
                      <span
                        class="aui-padded-l-5 d-font-size-18"
                        v-if="post.Data"
                        style="font-weight: normal;"
                      >{{post.Data}}人</span>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- 公告 -->
        <div class="aui-padded-15 aui-margin-t-15 d-shipOver-notice" id="notice">
          <section class="d-overview-hd" style="height: 22%;">
            <div class="aui-flex-col aui-margin-b-10">
              <div class="d-chartname">公告内容</div>
            </div>
            <div class="d-chartline"></div>
          </section>
          <c-maqtext :list="NoticeList"></c-maqtext>
          <!--<div class="d-noticeBox">
                    <ul class="aui-padded-l-15 aui-padded-r-15 aui-margin-0">
                        <li v-for="(notice, index) in NoticeList" v-if="NoticeList.length>0" class="aui-flex-col">
                            <div class="d-serial"><span class="d-cirdot"></span></div>
                            <div class="d-con">
                                <p>
                                    {{notice.ContentStr}}
                                </p>
                            </div>
                        </li>
                    </ul>
          </div>-->
        </div>
      </div>

      
        <div class="aui-flex-item-5 d-height-100">
            <div class="aui-padded-l-15 aui-padded-r-15 d-shipOver-cenBox">
                <!-- 地图 -->
                <div class="d-shipOver-map">
                    <div class="map d-zoom aui-flex-col aui-flex-middle" id="map">
                        <div class="d-mapCon">
                            <div class="mapwrap">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1220 856" xml:space="preserve">
                                    <path class="st0" d="M752.3,514c0,0-4.9-8.4-9.7-9.3c-4.9-0.9-33.6-28.3-33.6-28.3v-3.1c0,0-0.9,0-6.6-2.2c-5.8-2.2-5.3-2.6-5.3-2.6
                                        l-1.8-4.4c0,0-0.5,4-2.2-1.3c-1.8-5.3-4.9-1.3-4.9-1.3l-4.9-8l-8-17.3l-12.4-21.2c-9.3-2.7-9.3-10.2-9.3-10.2
                                        c0-10.6-15.5-23-15.5-23c0-3.5-10.6-13.3-10.6-13.3l-3.1-6.6c-5.8-4-14.6-4.9-14.6-4.9c0-6.7-8-4-8-4l1.9-2.6
                                        c1.8-3.5-9.7-15.9-9.7-15.9l-12.4,0.4c1.4-7.1-15-15.5-15-15.5c-3.9,0.5-7.9-0.1-11.5-1.8c-1.8-3.6-8.8-9.3-11.1-8
                                        c-1.1,0.6-0.4-4.5-4.5-7.5c-4.4-3.2-13.6-4.4-13.6-4.4c-5.8-3.5-8.4,0-8.4,0c-4.4-2.3-16.4-7-16.4-7c-4.4-7.1-12.8-6.3-12.8-6.3
                                        c-7.5-0.9-11.1-4-11.1-4c-11.9-2.7-14.2,1.8-14.2,1.8c0-4.4-0.9-6.2-0.9-6.2l-7.5-8.8c-2.2-7.5-7.1-4.4-7.1-4.4l-8.5,1.7
                                        c-4.5,0.6-6.8-6.3-6.8-6.3l-6.8-12.5c-6.8-1.7-10.2-0.6-10.2-0.6l-9.7-6.8l-8-4.6l-4-8.5c-7.4,1.7-16.5-5.1-16.5-5.1
                                        c-6.3,4.6-8,0.6-8,0.6l-13.1-6.8c-6.4,1-13,0-18.8-2.8L322.4,223l-14.2-0.6l0,0l-0.7,4.1l-8.2-1.9l-1.2-4.2l-6.8-0.2l-5.4,10.1
                                        l-14-0.9L260,243.7l-6-1.2l-12.6,8.4l-0.9,2.6l3,2.3l2.1,4.4l-2.1,4.2l-0.5,5.8c-0.5,16.6-13.6,18.4-13.6,18.4L216.1,300
                                        c-3.3,4,1.7,5.6,1.7,5.6l11.3,7.6l2.3,16.5l0.7,5.6c8.3-3.3,9.3,0,9.3,0c-2,8,5,9.3,5,9.3l-6.6,8l-3.3-4l-5-3
                                        c-5.6-6.3-11.3,0.3-11.3,0.3c-8.3,7-6.3,1.7-6.3,1.7l-1.3-7.3l-6,1c0,8-14.9,17.9-16.6,19.2c-1.7,1.3-1.4,28.5-1.4,28.5
                                        c5.8,1.8,4,13.3,4,13.3c4,8.8,0.9,21.7,0.9,21.7c-4.1,0-8.1,0.7-11.9,2.2c0,0,0.5,5.3-7.5,4c-3.2-0.6-6.5-1.1-9.7-1.3l-19,6.2
                                        c-4,0-23-1.8-23-1.8c-3.6,0-18.6-6.2-18.6-6.2c-14.1,9.3-24.3,4-24.3,4l-13.4-1.5c-7.5,5.3-8.6,18.3-8.6,18.3l11.4,17.2l-0.4,12.8
                                        l-4.2,5.7c-11.6,12.2-4.4,16.9-4.4,16.9l9.6,5.1l19.6,3.7l18.1,0.3l6.1-1.8l5.5-0.9c4.3-9.2,9.2-5.8,9.2-5.8
                                        c2.8,3.4,12.5,11.6,12.5,11.6c6.4,0.2,12.1,4.1,14.4,10.1l-2.8,8l0.3,11.9l2.1,7.3l1,16.4C146,585.2,165,586,165,586l-1.8,14.7
                                        l-4.4,3.5c-16.8-0.4-12.4,11.1-12.4,11.1c3.1,7.1,13.3,0.4,13.3,0.4l14.6,2.7c3.1,10.2,15.9,0.4,15.9,0.4
                                        c-1.3-12.4,4.4-11.1,4.4-11.1c5.2-0.4,10.3-1.8,15-4l15.5-2.2v5.8l4.9,5.3c11,5.3,2.6,20.3,2.6,20.3c-7.1,15.9,2.2,16.4,2.2,16.4
                                        l18.6-2.2c12.8,8,15,0.4,15,0.4c10.7,0,8-3.3,8-3.3c8.8-4,21.5,6.4,21.5,6.4c-4.8,10.3,4.8,12.7,4.8,12.7
                                        c0.8,8.8,19.9,11.9,19.9,11.9c-5.6,12.7-0.8,15.9-0.8,15.9c3.2,9.5,47-1.6,47-1.6c6.2-0.6,12.4-2,18.3-4l5.6-8l6.4-9.5l25.5-19.8
                                        c13.5-0.8,27.1-12.7,27.1-12.7c1.5,0,4.6-1,8-2.3l7.8-0.5l8.5-5.7l11.7-1l21.3-7l21.6-1.1l10.2-4l4.8-0.9c8.7,2.5,25.4-3.8,25.4-3.8
                                        l7.2-1.6l0.9-0.2l26.5-3.2l17.6-2.7l-1.7-1.1c5.7-1,10.6-1.7,10.6-1.7c27.1,5.6,31.3-3.1,31.3-3.1c20.7,6.3,23.9-4,23.9-4l24.7,2.4
                                        l20.7-8.4c8.8,0,27.5-17.1,27.5-17.1L752.3,514z" />
                                    <g class="st1">
                                        <path class="st2" d="M483,219.5l-2.4,2.4c0,0,1,6.2,5.8,7.7c0,0,10.1,1.6,13.4,6.3L519,256l11.9,6.7l8.2,2.3l6.2,5.4l7.2,5.6
                                            l43.2,25.4c0,0,18.2,19.6,17.3,24.7l8.6,4.6h8.2v-4.6h2.4v-3.5c0,0,0-20.6-5.8-28.7S606.7,276,606.7,276l-12-3.2l-7.7-3.8l-1.9-4
                                            h-5.3l-7.7-2.3l-6.7-3.8l-9.1-0.5l-12-5.8l-10.1-2.9l-12.1-5l-10.4-13.3l-3.4-6.7l-7.2,0.5l-1-5.8L483,219.5z" />
                                        <path class="st2" d="M639.7,320.9l0.8,1.5l-2.2-1.5c0,0-2.6-22.1-4.2-22.9s0-4.4,0-4.4l-1.9-1.5l-1.1-2l1.1-1.5l7.5,0.4
                                            c5-1.7,10.5,3.2,10.5,3.2v1.4h8.6l5.8,4.3h3.6l7,2.9l8.5,4.8l8.2,2.9c6.5,3.4,4.8,3.8,4.8,3.8l-5.5,29.3l-2.9,1.9l-20.6-1.9
                                            l-4.3,1.9l-3.6-1.9l-6.2-1.9l-0.5-4.3l-8.4-5.1l-2-2.8l-1.4-1.4l-0.2-3.1" />
                                        <path class="st2" d="M333.7,90.2l11.1-10.7v-3.1l5.3-9.8l2.7,3.6c0,0,26.7-21.8,31.6-22.7c0,0,10.7-4.9,18.7,0l42.7,24.9
                                            c0,0-0.9,1.8,6.2,2.2c0,0,6.2-8.9,46.3,24l56.1,38.3l3.6,5.8l10.2,4.9l11.6,13.4c1.7-1.3,4.1-1.3,5.8,0c3.1,2.2,7.6,4.9,7.6,4.9
                                            l-9.3,9.8c0,0,24.5,5.3,26.3,8l23.2,5.8h28.9c0,0,28.9,2.2,30.7,16.9l11.1,9.4l12,10.2l12,16.9c2.5,8.6,0.8,17.8-4.5,24.9l-4,3.6
                                            l-18.7,7.1l-17.8,7.6l-32.5,3.1l-49-30.7c0,0-27.2-18.3-51.2-16l-45.9-23.6c0,0-22.2-17.9-27.6-14.8s-13.4-7.6-13.4-7.6l-7.6-4.4
                                            c0,0-8.4-3.1-9.8-3.1s-12-4-12-4l-3.1-5.8l-11.2-7.9l-25.8-27.7l-10.2-1.8L365.3,128l-17.8-18.3l-4.5-6.7l-7.5-7.1l-4-6.2
                                            L333.7,90.2z" />
                                    </g>
                                    <path class="st0" d="M830.1,539.6l38.9,34.2l73.3,41.5c0,0,13,7.7,17-7l-1.4-12l13.5-7.3l2.7-20.2l-14.4,11.6l-36.7-16.5l-8.3-5.5
                                        l-13.6-11.3l0.6-3.7l2.2-12.4l-14-10.3l-10,5.9l-11.2-3.5l-11,9.6l-28.3,2.5L830.1,539.6z" />
                                    <path class="st2" d="M971.9,585.5l9.9,3.3l-2.6,18.5l-13.3-1.7c0,0-1.5-1-0.3,9.8l10.1,3.7c0,0,27.1-3.5,34.8-1.5
                                        c0,0-1.7,4.1,17.5,3.3c0,0,3.8-3.7,3.5-13.1c0,0-7.9-4.7-5.4-7.6c0,0-1.2-8,1.6-8.7c0,0-1.4-3.5,1.4-4.3l-1.7-2.6c0,0-1-2.6-3.4,7.4
                                        c-2.9,1.1-5.8,1.9-8.7,2.6l-32.4-6.3" />
                                    <g>
                                        <polygon class="st0" points="769.8,499.5 771.3,512.8 831.1,523.8 838,515.6 828.7,508.4 797.3,496.3 	" />
                                        <path class="st0" d="M1030.2,575.8l2.2,2.8c0,0,1,4.2,1.9,4.1s5.4-0.6,6.5,0.9c0,0,9-0.3,11.6-0.2l3.1-0.3l-0.3-2.6
                                            c0,0-1.2-0.3-3.9-1c-0.2-1.7-0.3-3.5-0.4-5.2c0,0,6-5.9,6.7-6s2.7-1.3-2.3-5.2l-5.3-0.3c-0.9,1.4-1.5,3-1.6,4.7
                                            c-5.6,2.8-7.5,0.9-8.3,6.9l-5.6,0.7c0,0-2.2-4.7-3.3-2C1029.3,576.1,1030.2,575.8,1030.2,575.8z" />
                                        <path class="st0" d="M962.2,642.6c2.9,8.7,6.8,9.7,3.5,10.1s-6-2.6-6-2.6l-4.1-6.7L950,644c-10.4,0.7-16.6,9-16.6,9
                                            c-10.6-5-7,5.1-7,5.1c7.8,1.5,9.2,13.7,9.2,13.7c-11.5,3.7-12.9,15.8-12.9,15.8l-4.2-1l-5.1,3.4l-4.7,0.5c0,0-10.5-12.4-18.8-18.3
                                            c-6.5-4.7-9.7-1.3-9.7-1.3c-3.9-0.5-11.5-17.2-11.5-17.2l6.2-8.3l48.9-9c9.8-5.4,5.9,6,5.9,6c9.4-1.1,9.6-7.8,9.6-7.8l9.2,5.6
                                            c0,0,12.6-2.4,13.1-0.1c0.4,1.7,0.9,3.3,1.5,4.9" />
                                        <path class="st0" d="M1022.1,642.1c0,0,5.9,10.3,8.4,2.4c0,0,2.5,4,6.5-7.7C1037.1,636.8,1026.3,628.3,1022.1,642.1z" />
                                        <path class="st0" d="M1047,696.2c0,0,7.2-5.6,11-7c2.7,1.5,5.3,3.1,7.8,4.8C1067.8,695.6,1058.5,705.3,1047,696.2z" />
                                    </g>
                                    <g>
                                        <circle class="st3" cx="549.4" cy="313.2" r="12" @click="setPort(0)" :class="mapColor(0,'back')" />
                                        <circle class="st4" cx="549.4" cy="313.2" r="17" @click="setPort(0)" :class="mapColor(0,'bord')" />
                                        <text transform="matrix(1 0 0 1 552.66 288.41)" class="st5 st6 st7" @click="setPort(0)">浦东</text>
                                    </g>
                                    <g>
                                        <circle class="st8" cx="599.5" cy="341.8" r="12" @click="setPort(2)" :class="mapColor(2,'back')" />
                                        <circle class="st9" cx="599.5" cy="341.8" r="17" @click="setPort(2)" :class="mapColor(2,'bord')" />
                                        <text transform="matrix(1 0 0 1 619.76 334.98)" class="st5 st6 st7" @click="setPort(2)">沪东</text>
                                    </g>
                                    <g>
                                        <circle class="st8" cx="636.7" cy="378.3" r="12" @click="setPort(3)" :class="mapColor(3,'back')" />
                                        <circle class="st9" cx="636.7" cy="378.3" r="17" @click="setPort(3)" :class="mapColor(3,'bord')" />
                                        <text transform="matrix(1 0 0 1 658.01 384.5)" class="st5 st6 st7" @click="setPort(3)">明东</text>
                                    </g>
                                    <g>
                                        <ellipse transform="matrix(0.9934 -0.1148 0.1148 0.9934 -57.9411 100.6138)" class="st3" cx="844.8" cy="553.5" rx="12" ry="12" @click="setPort(6)" :class="mapColor(6,'back')" />
                                        <ellipse transform="matrix(0.9934 -0.1148 0.1148 0.9934 -57.9411 100.6138)" class="st4" cx="844.8" cy="553.5" rx="17" ry="17" @click="setPort(6)" :class="mapColor(6,'bord')" />
                                        <text transform="matrix(0.9991 4.292191e-02 -4.292191e-02 0.9991 770.1 573.4899)" class="st5 st6 st7" @click="setPort(6)">尚东</text>
                                    </g>
                                    <g>
                                        <ellipse transform="matrix(0.9934 -0.1148 0.1148 0.9934 -62.3479 107.6483)" class="st8" cx="903.7" cy="595.3" rx="12" ry="12" @click="setPort(4)" :class="mapColor(4,'back')" />
                                        <ellipse transform="matrix(0.9934 -0.1148 0.1148 0.9934 -62.3479 107.6483)" class="st9" cx="903.7" cy="595.3" rx="17" ry="17" @click="setPort(4)" :class="mapColor(4,'bord')" />
                                        <text transform="matrix(0.9991 4.292191e-02 -4.292191e-02 0.9991 836.0699 623.3499)" class="st5 st6 st7" @click="setPort(4)">盛东</text>
                                    </g>
                                    <g>
                                        <ellipse transform="matrix(0.9934 -0.1148 0.1148 0.9934 -64.2644 118.8345)" class="st9" cx="939.9" cy="607.5" rx="12" ry="12" @click="setPort(5)" :class="mapColor(5,'back')" />
                                        <ellipse transform="matrix(0.9934 -0.1148 0.1148 0.9934 -64.2644 118.8345)" class="st9" cx="939.9" cy="607.5" rx="17" ry="17" @click="setPort(5)" :class="mapColor(5,'bord')" />
                                        <text transform="matrix(0.9991 4.292191e-02 -4.292191e-02 0.9991 913.3199 652.2299)" class="st5 st11 st7" @click="setPort(5)">冠东</text>
                                    </g>
                                    <g>
                                        <path class="st12" d="M439.9,643.1l-4.7-3.6l0.4-2.2l-6.1-8.7L428,620l-14.5,1.1c0,0-2.2-2.9-4.3-2.9l-0.7-2.5L407,611l1.5-2.5
                                            l-4.3,4.3l-2.5-0.4l-1.8,3.6h-3.3l-7.6-2.5l0.4-2.2l0.4-5.1l1.8-1.8l0.7-15.9l-4.3-5.1h-5.1l-6.5-3.6l1.5-9.4l-4.3-5.1l3.1-7.1
                                            l-4-8.5c0,0,4-3.4,2.8-20.5l13.7-6.8h2.8l5.7-2.3l6.3-3.4l7.4-2.8l3.4-0.6h4.5l4-2.3l12.5-3.4l10.2-6.3l6.8,5.1l6.8,5.7l6.3-0.6
                                            l0.6-4l3.4,1.7c0,0,9.7,2.8,12.5,2.8s13.1,2.8,13.1,2.8l3.4-5.7h3.4l8,0.6l10.2-2.3c0,0,6.8,1.7,8.5,4.6s7.4,0,7.4,0l5.1,1.1l8-0.6
                                            h31.3c0,0-4,2.8,4.5,2.8l11.4,4l2.5,5.7l3.5,3l3,0.5c0.1,0.8,0.3,1.6,0.7,2.3c0.7,1.4,3.8,1.9,3.8,3s-0.5,1.6,0.9,1.6
                                            c0.9,0,1.9,0.1,2.8,0.2l3.3,0.9l2.1,1.6l0.2,1.4c0.3,0.6,0.8,1,1.4,1.2c1.2,0.5,5.8,0.7,5.6,2.8c-0.1,1.6,0,3.3,0.2,4.9l1.2,0.7
                                            c0.9,0.4,1.8,0.8,2.8,1.2c0,0,2.8-1.4,3,0s1.2,2.1,1.2,4.2v5.4l-10.2,23.4l1.2,10l2,4.8l-4.7,3.1l-12.7,3.4l-20.2,1.7l-18.2,1.7
                                            l-8.5,2.8l-15.3,4l-7.4-1.2l-10.2,4l-21.6,1.1h-4l-17.3,7l-11.7,1l-8.5,5.7l-9.1,0.6l-10.8,2.8L439.9,643.1L439.9,643.1z" />
                                        <path class="st12" d="M302.3,557.5h-14.4l-13.4,7.5l-9.5,2c0,0-4.5,3-6.5-1c0,0-4-5.5-6-1.5l-2.5,5l-5.5,0.5l-2-7l3-1v13.4l-4.5,3
                                            h-8l-8.5-1.5l-1.5-5l1-5.5l-0.5-2.5h-3.5l-2.5-1l-3.5,1.5v7l-2.5,5.5c-4.1-0.9-8.3-1.4-12.4-1.5l-13.4-2l-17.9-1l2-3.5l-1-7.5
                                            l2.5-2l-0.5-3.5l2.5-8l0.5-4.5l2.5-7.5c0,0,1-1.5,6.5,2.5l6.5,3h8l3.5-1.5l4-1.5l10.9-23.4l-4-9.5v-5c0,0-5-2.5,0-3.5
                                            c3-0.6,5.8-1.6,8.5-3l-0.5-6l-9,1l-6.5-4.5v-5.5l4,1.5l24.4,0.5l-3-4.5l-5-5l-0.5-3l-7-3l-4-4.5l-1-3l6-2l3.5-4.5l9.4,3h12.4l4-2
                                            l4.5-0.5h7l1-5.5l3.5-2l-0.5-4l-1-4l-1-4l5-5l5,2.5l3,3.5l7.5-1l0.5,2.5l3,6.5l4.5,6l3-1l3,1.5l1.5-5.5l5-5h10l8-2.5l4-3l3.5-1.5
                                            l-5.5-3.5l3.5-4l9,0.5h10l6.5-2.5l7,6l1.5,7.5l1,4l5,3l1.5,8l6,2l4.5,6.5v7l-6.5,5l-7,4l-5,1l-1-4l-3,1l2.5,6l-2,8.5l0.5,9.5l6,8.5
                                            l-4.7,9.5l-2.5,3l1,5l11.4,5l9.5,3l0.5,15.4l-2,5.5l1,6l-3,9.5l-13.4,3.5l-10.5-0.5l-6.5-5.5h-10v8.5l-1.5,7l-3.5-0.5l-24.9-12.9
                                            l-0.5-8.5L302.3,557.5z" />
                                        <polyline class="st12" points="673,436.6 665.1,439.9 656.5,439.2 652.5,434.6 641.9,436.6 641.2,431.9 633.9,430 622,430.6 
                                            614,430 614,436.6 606.1,437.9 601.4,437.9 596.8,437.9 598.1,434.6 592.1,430 584.8,430 578.2,426.6 582.8,424.6 580.8,418.7 
                                            573.6,415.4 570.9,425.3 566.3,429.3 566.3,434.6 559,435.9 550.3,430.6 550.3,426 547,420 539.7,420 528.5,419.3 519.8,418 
                                            513.9,420.7 503.3,420.7 497.3,419.3 490,418.7 484.7,424.6 484.7,428.6 483.4,433.9 479.4,437.3 	" />
                                        <path class="st12" d="M499,446.4l-0.5,5.4h-6.4l-4,4.8l9.5,1.6l-4,6.4c0,0-8,0-8,4s-3.2,8.8-3.2,8.8l7.2,4l2.4,14.3
                                            c0,0-4,4.8,0,4.8s8.8,6.4,8.8,6.4l-1.6,3.3" />
                                        <path class="st12" d="M474,360.9l9.3-3.3l5.1-4.6l2.8-7.4l-0.8-7.5l-3.2-18.6c-2.4-8.8-1.2-10.3-10.8-10.3h-8l-4-1.7l-5.7,0.6h-1.6
                                            l-2.4,2.3v8l-6.4,3l-5.8,3.7l-6.8-0.4l-1.8,1.6l-3.7-0.1l-2.7,0.5l-4.5-0.3l-2.1-0.4l-2.6,0.4l-0.4,1.2l-1.4,1.1L414,332
                                            c0,0-9.7,3.4-5.1,8v5l2.8,5.7c0,0,5.7,5.7-2.8,2.8l-7.4-5.1c0,0-4,0-7.4-4.5s-1.7-6.3-8-4.5l-12.5,1.7l-5.7-1.1l-6.3-2.3l-1.5-4
                                            l-1.4,7.4v6.6c0,1-0.9,1.5,0,1.9l1,0.5l6.9,3l5.1,5.7l7.4,8c-0.3,2-2,3.4-4,3.4c-3.4,0-12.5,1.7-12.5,1.7l-3.4,5.7
                                            c1.5,0,2.8,1.2,2.8,2.7c0,0,0,0.1,0,0.1v10.2c0,0-2.8,7.4,2.8,7.4s14.8,0.6,14.8,0.6c2.4,0.3,4.9,0.5,7.4,0.6h12c0,0,8,1.1,1.1,6.3
                                            c0,0-5.1,0.6-5.1,3.4c0,0-1.1,2.8,2.3,4s2.2,4.3,2.2,7.7c0.7,1.1,1.7,1.9,2.9,2.3c0,0,2.1,2.8,2.1,5.1s-1.4,4,0.9,4.9
                                            s1.9,6.3,7.5,6.2s11.5,13.1,13.2,12.9c0,0,2.6,3.3,5.9-0.7l5.4-10.7l-5.4-17.3c0,0,8.1-21.6,7.3-24.5l4.1-2.3l2.6-0.4
                                            c0,0,1.9,0.7,2.9,0s10.4-6.4,10.4-9.7l-2.2-11.8c0,0-5.2-5.7,0.3-8.5l3.2-1.7l5.9-1.7L474,360.9L474,360.9z" />
                                        <path class="st12" d="M432.8,450.9c2.4,0,1.6-3.6,10.8-3.6l7.2-0.4l-0.8-5.2l2.8-7.2l8.4,3.6l23.1,1.6l4,0.4l8,4.8l2.8,1.6" />
                                        <path class="st12" d="M348,422.4l0.6-13.1l-9.7-8l-0.6-2.8l-3.4-1.1l-4.5-0.6v4l-13.6-4.5l-2.3-5.7l-4-8.5l-6.3-8l-4.5-3.4l1.1-7.4
                                            H294l-8.5,2.3c0,0-2.8,2.8-5.7,2.8h-11.4l-8.5-4.5L241.7,353" />
                                        <path class="st12" d="M331.5,216.4l9.3,9.3c0,0-2,6.6,1.3,9.3l2.6,8.6c0,0,5.3-1.3,5.3,2.6l2.6,10.6l3.3,4.6c-0.6,3-3,5.4-6,6
                                            l-4.6,7.3l-2.7,1.8c-0.1,1.1-0.1,2.2,0.1,3.3c0.2,0.5,0.4,1.1,0.7,1.5c0.3,0.4,0.7,1.2,0.9,1.5s-0.2,0.1,0.4,0.6s4.8,2.8,4.8,2.8
                                            s2.6,3,3.5,3.4c2.2,0.7,4.4,1.4,6.6,1.8c0.4,0-0.6,10.2-0.6,10.2l2.5,4l0.6,3.1c0.2,1.5,0.3,3.1,0.3,4.6v7.6l-0.6,9.5l-1.5,2.1
                                            l-0.5,3.4" />
                                        <path class="st12" d="M454.6,310.3c0,0-7.8-5-5.9-9.6l9-15.1l5.3-2.5" />
                                        <polyline class="st12" points="154.6,549.6 162.6,550.4 172.1,550.4 	" />
                                    </g>
                                    <g>
                                        <circle class="st8" cx="508.6" cy="288.7" r="12" @click="setPort(1)" :class="mapColor(1,'back')" />
                                        <circle class="st9" cx="508.6" cy="288.7" r="17" @click="setPort(1)" :class="mapColor(1,'bord')" />
                                        <text transform="matrix(1 0 0 1 490.89 260.92)" class="st5 st6 st7" @click="setPort(1)">振东</text>
                                    </g>
                                    <g>
                                        <circle class="st8" cx="390.1" cy="230.4" r="12" :class="mapColor(10,'back')" />
                                        <circle class="st9" cx="390.1" cy="230.4" r="17" :class="mapColor(10,'bord')" />
                                        <text transform="matrix(1 0 0 1 372.4498 200.54)" class="st5 st6 st7">罗泾</text>
                                    </g>
                                    <g>
                                        <circle class="st8" cx="667.9" cy="418.9" r="12" :class="mapColor(11,'back')" />
                                        <circle class="st9" cx="667.9" cy="418.9" r="17" :class="mapColor(11,'bord')" />
                                        <text transform="matrix(1 0 0 1 688.21 434.085)" class="st5 st6 st7">海通</text>
                                    </g>
                                    <g>
                                        <circle class="st8" cx="450.3" cy="292.1" r="12" :class="mapColor(12,'back')" />
                                        <circle class="st9" cx="450.3" cy="292.1" r="17" :class="mapColor(12,'bord')" />
                                        <text transform="matrix(1 0 0 1 333.5665 308.3151)" class="st5 st6 st7">张华浜</text>
                                    </g>
                                    <g>
                                        <circle class="st9" cx="483.5" cy="318.7" r="12" :class="mapColor(13,'back')" />
                                        <circle class="st8" cx="483.5" cy="318.7" r="17" :class="mapColor(13,'bord')" />
                                        <text transform="matrix(1 0 0 1 470.7652 364.9252)" class="st5 st6 st7">宜东</text>
                                    </g>
                                    <g>
                                        <circle class="st8" cx="452.5" cy="379.7" r="12" :class="mapColor(14,'back')" />
                                        <circle class="st9" cx="452.5" cy="379.7" r="17" :class="mapColor(14,'bord')" />
                                        <text transform="matrix(1 0 0 1 368.7652 380.9252)" class="st5 st6 st7">国客</text>
                                    </g>
                                    <g>
                                        <circle class="st8" cx="432.5" cy="429.7" r="12" :class="mapColor(15,'back')" />
                                        <circle class="st9" cx="432.5" cy="429.7" r="17" :class="mapColor(15,'bord')" />
                                        <text transform="matrix(1 0 0 1 414.7652 475.9252)" class="st5 st6 st7">龙吴</text>
                                    </g>
                                </svg>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- 识别率等饼图 -->
                <div class="aui-margin-t-15 d-shipOver-recRate">
                    <div class="aui-flex-col aui-flex-middle d-ochart">
                        <div class="aui-flex-col aui-flex-center d-item">
                            <div id="pie1" style="height: 100%;"></div>
                        </div>
                        <div class="aui-flex-col aui-flex-center d-item">
                            <div id="pie2" style="height: 100%;"></div>
                        </div>
                        <div class="aui-flex-col aui-flex-center d-item">
                            <div id="pie3" style="height: 100%;"></div>
                        </div>
                        <div class="aui-flex-col aui-flex-center d-item">
                            <div id="pie4" style="height: 100%;"></div>
                        </div>
                        <div class="aui-flex-col aui-flex-center d-item">
                            <div id="pie5" style="height: 100%;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

      <div class="aui-flex-item-3">
        <!-- 箱量统计 -->
        <div class="d-shipOver-boxTotal aui-margin-b-15">
          <div class="aui-flex-col aui-flex-middle aui-flex-center d-box-hd">
            <strong class="bigfont">{{DPName}}</strong>
            <div class="d-bg-recline-two"></div>
          </div>

          <div class="aui-margin-t-15 d-box-bd">
            <div v-if="isGlobal" class="aui-flex-col d-height-50 d-totalYear">
              <div class="aui-flex-item-12 d-item">
                <div class="aui-flex-col aui-flex-bottom aui-flex-center d-title">
                  <div class="aui-flex-col aui-flex-middle aui-flex-right d-totalYear-left">
                    <c-number :valnum="countnum"></c-number>
                    <!--<strong id="YearTallyTeuOne" class="d-text-red bigfontNum"><span class="t_num t_num1"></span></strong>-->
                  </div>
                  <div class="aui-flex-col aui-flex-bottom d-totalYear-right">
                    <strong class="bigfont d-text-right">TEU</strong>
                  </div>
                </div>
                <div class="aui-flex-col aui-flex-middle d-planYear">
                  <div class="aui-flex-item-7 aui-flex-col aui-flex-middle">
                    <strong class="d-label aui-padded-l-10">全年指标：</strong>
                    <strong
                      class="d-text-yellow aui-padded-r-5 d-ports-quota"
                    >{{TallyTeu.PlanYearNumber}}</strong>
                    <!--<strong class="d-text-yellow d-font-size-16 aui-padded-r-10">{{TallyTeu.PlanYearNumber}}</strong>-->
                    <strong class="d-label">万TEU</strong>
                  </div>
                  <div class="aui-flex-item-5 aui-flex-col aui-flex-middle">
                    <strong class="d-label">完成率：</strong>
                    <strong class="d-label">{{TallyTeu.FinishRate}}</strong>
                  </div>
                </div>
              </div>
            </div>

            <div v-else class="aui-flex-col d-height-50">
              <div class="aui-flex-item-6 aui-flex-row aui-flex-middle d-item">
                <span class="d-line"></span>
                <div class="d-daping-boxnumber">
                  <h3 class="d-title">年度实时箱量</h3>
                  <div>
                    <strong
                      id="YearTallyTeu"
                      v-if="TallyTeu.YearTallyTeu == null"
                      class="d-text-red bigfontNum"
                    >{{TallyTeu.YearTallyTeu}}</strong>
                    <strong class="d-text-red bigfontNum">{{TallyTeu.YearTallyTeu}}</strong>
                    <strong class="bigfont">万TEU</strong>
                  </div>
                </div>
              </div>

              <div class="aui-flex-item-6 aui-flex-row aui-flex-middle d-item">
                <span class="d-line"></span>
                <div class="d-daping-boxnumber">
                  <h3 class="d-title">季度实时箱量</h3>
                  <div>
                    <strong
                      id="QuarTallyTeu"
                      v-if="TallyTeu.QuarTallyTeu == null"
                      class="d-text-red bigfontNum"
                    >{{TallyTeu.QuarTallyTeu}}</strong>
                    <strong class="d-text-red bigfontNum">{{TallyTeu.QuarTallyTeu}}</strong>
                    <strong class="bigfont">万TEU</strong>
                  </div>
                </div>
              </div>
            </div>

            <div class="aui-flex-col d-height-50">
              <div class="aui-flex-item-6 aui-flex-row aui-flex-middle d-item">
                <span class="d-line"></span>
                <div class="d-daping-boxnumber">
                  <h3 class="d-title">月度实时箱量</h3>
                  <div>
                    <strong
                      id="MonthTallyTeu"
                      v-if="TallyTeu.MonthTallyTeu == null"
                      class="d-text-red bigfontNum"
                    >{{TallyTeu.MonthTallyTeu}}</strong>
                    <strong class="d-text-blue bigfontNum">{{TallyTeu.MonthTallyTeu}}</strong>
                    <strong class="bigfont">万TEU</strong>
                  </div>
                </div>
              </div>

              <div class="aui-flex-item-6 aui-flex-row aui-flex-middle d-item">
                <span class="d-line"></span>
                <div class="d-daping-boxnumber">
                  <h3 class="d-title">昼夜实时箱量</h3>
                  <div>
                    <strong
                      id="DayTallyTeu"
                      v-if="TallyTeu.DayTallyTeu == null"
                      class="d-text-red bigfontNum"
                    >{{TallyTeu.DayTallyTeu}}</strong>
                    <strong class="d-text-blue bigfontNum">{{TallyTeu.DayTallyTeu}}</strong>
                    <strong class="bigfont">万TEU</strong>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 码头table-总部 -->
        <div
          v-if="isGlobal && istabShow =='all'"
          id="headquarters"
          class="aui-margin-b-15 d-shipOver-tab"
        >
          <div class="d-table-border" style="padding: 5px;">
            <section class="d-table-whiteWrap">
              <table
                border="0"
                cellpadding="0"
                cellspacing="0"
                class="d-width-100"
                v-if="results.ShipCraneList && results.ShipCraneList.length>0"
                style="table-layout: fixed;border:0;"
              >
                <tr class="d-table-th">
                  <th>
                    <div>码头</div>
                  </th>
                  <th>
                    <div>计划靠泊</div>
                  </th>
                  <th>
                    <div>计划离泊</div>
                  </th>
                  <th>
                    <div>实际作业路</div>
                  </th>
                </tr>
                <tr v-for="(ship,index) in results.ShipCraneList" :key="index" class="d-table-tr">
                  <td>
                    <div>{{ship.PierFlagCaption}}</div>
                  </td>
                  <td>
                    <div>{{ship.PlanBerth}}</div>
                  </td>
                  <td>
                    <div>{{ship.PlanLeave}}</div>
                  </td>
                  <td>
                    <div>{{ship.RealCrane}}</div>
                  </td>
                </tr>
              </table>
            </section>
          </div>
        </div>

        <!-- 码头table-分部 -->
        <div v-show="istabShow == 'Dp'" id="sectional">
          <!-- :style="{height: results.ShipCraneList.length>=2?'53%':'63%'}" -->
          <div class="aui-margin-b-15 d-shipOver-tab d-border">
            <section class="d-table-whiteWrap" id="shipOverSec">
              <table
                border="1"
                cellpadding="0"
                cellspacing="0"
                class="d-width-100"
                v-show="results.ShipCraneList"
                style="table-layout: fixed;"
              >
                <tr class="d-table-th">
                  <th>
                    <div>码头</div>
                  </th>
                  <th>
                    <div>计划靠泊</div>
                  </th>
                  <th>
                    <div>计划离泊</div>
                  </th>
                  <th>
                    <div>实际作业路</div>
                  </th>
                </tr>
                <tr v-for="(ship,index) in results.ShipCraneList" :key="index">
                  <td>
                    <div>{{ship.PierFlagCaption}}</div>
                  </td>
                  <td>
                    <div>{{ship.PlanBerth}}</div>
                  </td>
                  <td>
                    <div>{{ship.PlanLeave}}</div>
                  </td>
                  <td>
                    <div>{{ship.RealCrane}}</div>
                  </td>
                </tr>
              </table>
            </section>
          </div>

          <!-- 基层理货部数据 -->
          <div class="aui-padded-15 d-shipOver-allData" id="allData">
            <section class="d-overview-hd">
              <div class="aui-flex-col aui-margin-b-10">
                <div class="d-chartname">综合数据</div>
              </div>
              <div class="d-chartline">
                <div class="d-chartcolor"></div>
              </div>
            </section>

            <div class="aui-flex-col d-height-85">
              <!-- 延迟开港预警 -->
              <div class="aui-flex-item-7">
                <div class="d-sec-tit">延迟开航预警</div>
                <div
                  class="aui-flex-row aui-flex-middle d-earlyWar d-cursor-pointer"
                  @click="delayDetailShow()"
                >
                  <div
                    class="aui-flex-col aui-flex-center aui-flex-middle d-img-size-1 d-iconwrap"
                    v-if="results.DPDelayWarn"
                    :class="delayClass(results.DPDelayWarn)"
                  >
                    <div class="d-font-size-25">{{results.DPDelayWarn.Data}}</div>
                  </div>
                  <div class="d-earlyWar-name">{{DPName}}</div>
                </div>
              </div>
              <!-- 设备完好率 -->
              <div class="aui-flex-item-5 d-intactRate">
                <div class="d-height-50">
                  <div class="d-sec-tit">设备完好率</div>
                  <div
                    class="aui-flex-col aui-flex-middle d-equRate"
                    v-if="results.EPIntactRate && results.EPIntactRate.EPIntactData != 0"
                  >
                    <div class="d-line-l"></div>
                    <div class="d-line-c"></div>
                    <div class="d-line-r"></div>

                    <div class="aui-flex-col aui-flex-middle d-barOne-hor">
                      <div
                        class="d-bar-left aui-flex-col aui-flex-middle aui-flex-center d-font-size-16"
                        v-if="results.EPIntactRate && results.EPIntactRate.EPIntactData != 0"
                        :style="{width:results.EPIntactRate.EPIntactPercent}"
                      >{{results.EPIntactRate.EPIntactNumber}}</div>
                      <div
                        class="d-bar-right aui-flex-col aui-flex-middle aui-flex-center"
                        v-if="results.EPIntactRate && results.EPIntactRate.EPIntactData != 0"
                        :style="{width:results.EPIntactRate.EPFailPercent}"
                      ></div>
                    </div>
                    <div class="aui-flex-item-12 aui-flex-col aui-margin-t-5">
                      <div class="aui-flex-item-6 aui-flex-col">
                        <span class="d-num">
                          80
                          <em class="d-font-normal">%</em>
                        </span>
                      </div>
                      <div class="aui-flex-item-6 aui-flex-col aui-flex-right">
                        <span class="d-num">
                          100
                          <em class="d-font-normal">%</em>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="d-height-50">
                  <div class="d-sec-tit">昼夜应急响应</div>
                  <template v-if="results.EmcProcessList && results.EmcProcessList.length>0">
                    <div
                      v-for="(emc,eindex) in results.EmcProcessList"
                      class="aui-flex-col d-emeresponse-li"
                      :key="eindex"
                    >
                      <div
                        class="aui-flex-item-8 aui-flex-col aui-flex-center"
                        :class="eindex == 0? 'd-text-blue':'d-text-orange'"
                      >{{emc.EmcProcessCaption}}</div>
                      <div class="aui-flex-item-4 aui-flex-col aui-flex-right">{{emc.Data}}次</div>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 弹出框 -->
    <div class="d-popupBox" v-if="isAlert">
      <section class="d-body">
        <div class="d-popheader">
          <div class="d-tit">延迟开航预警详情</div>
          <span class="close" @click="closeAlert">
            <i class="iconfont icon-close"></i>
          </span>
          <div class="line"></div>
        </div>

        <div class="d-popform">
          <div class="d-padded-10">
            <section class="d-table-whiteWrap">
              <el-table
                v-if="results.DPDelayWarn.DelayWarnDeList"
                class="show-scrollBar"
                height="100%"
                max-height="900"
                ref="multipleTable"
                :data="results.DPDelayWarn.DelayWarnDeList"
                stripe
                size="mini"
                style="width: 100%;"
              >
                <el-table-column prop="PierFlagCaption" label="码头" width="90"></el-table-column>
                <el-table-column prop="VesselName" label="船名" width="100" show-overflow-tooltip></el-table-column>
                <el-table-column prop="Voyage" label="航次" width="90" show-overflow-tooltip></el-table-column>
                <el-table-column prop="RemainData" label="剩余作业量" width="120"></el-table-column>
                <el-table-column prop="CraneNumber" label="作业路数" width="120"></el-table-column>
                <el-table-column prop="FinishData" label="完成作业量" width="120"></el-table-column>
                <el-table-column prop="PlanLeaveTime" label="计划离港时间" show-overflow-tooltip></el-table-column>
              </el-table>
            </section>
          </div>
        </div>
      </section>
    </div>
  </article>
</template>



<script>
import cMaqtext from "@/components/cMaqtext";
import cClockRow from "@/components/cClockRow";
import cNumber from "@/components/cNumber";

var pie1 = null;
var pie2 = null;
var pie3 = null;
var pie4 = null;
var pie5 = null;

var piegangs = null;
var countnum = 0;

let userInfo = jsTools.SessionStorage.getVal("loginUser");

export default {
  components: { cMaqtext, cClockRow, cNumber },
  data() {
    return {
      userInfo: userInfo,
      countnum: 0,
      isAlert: false,
      popupType: "hide",
      weatherInfo: {}, //天气信息
      DpId: userInfo.isGlobal ? "" : userInfo.Department.DP_ID,
      DPName: userInfo.isGlobal ? "年度实时箱量" : userInfo.Department.Name,
      mapItem: ["", "", "", "", "", "", ""],
      results: {
        DockStateList: [], //对接标识
        DutyNumberList: [], //出勤人数
        NoticeList: [],
        RateList: {},
        ShipCraneList: [], //右下角表格

        EPIntactRate: {}, //设备完好率
        EmcProcessList: [], //昼夜应急
        DPDelayWarn: {
          Data: "",
          DelayWarnDeList: []
        } //延迟开航预警
      },

      NoticeList: [],
      DispatchNumberList: [],
      NumRate: {}, //箱号识别率
      TypeRate: {}, //箱型识别率
      PosRate: {}, //箱位识别率
      InitialRate: {}, //初始化率
      ArtificialRate: {}, //人工干预率
      TallyTeu: {},
      styleType: sessionStorage.getItem("styleType"), //主题
      isGlobal: userInfo.isGlobal,
      istabShow: userInfo.isGlobal ? "all" : "Dp",
      mapDpId: []
    };
  },
  computed: {},
  mounted: function() {
      this.$nextTick(()=>{
            $(window).resize(() => {
                this.initSize();
            });
            
            this.createPie();
            this.createPieGangs();

            this.initData();
            this.initSize();
            clearInterval(jsTools.Res.timer);
            jsTools.Res.timer = setInterval(() => {
            this.show_num();
            }, 10000);
      })

    
  },
  methods: {
    closeAlert: function() {
      this.isAlert = false;
      this.popupType = "add";
    },
    mapColor: function(key, style) {
      if (style == "back") {
        if (this.mapItem[key] == 1) {
          //黄色
          if (this.isGlobal) return "cls-7";
          else if (this.mapDpId[key] == this.DpId && !this.isGlobal)
            return "cls-7";
          else return "cls-7 disabled";
        } else if (this.mapItem[key] == 2) {
          //红色
          if (this.isGlobal) return "cls-red";
          else if (this.mapDpId[key] == this.DpId && !this.isGlobal)
            return "cls-red";
          else return "cls-red disabled";
        } else {
          //绿色
          if (this.isGlobal) return "cls-10";
          else if (this.mapDpId[key] == this.DpId && !this.isGlobal)
            return "cls-10";
          else return "cls-10 disabled";
        }
      } else {
        //外圈

        if (this.mapItem[key] == 1) {
          if (this.isGlobal) return "cls-7bord";
          else if (this.mapDpId[key] == this.DpId && !this.isGlobal)
            return "cls-7bord";
          else return "cls-7bord disabled";
        } else if (this.mapItem[key] == 2) {
          if (this.isGlobal) return "cls-redbord";
          else if (this.mapDpId[key] == this.DpId && !this.isGlobal)
            return "cls-redbord";
          else return "cls-redbord disabled";
        } else {
          if (this.isGlobal) return "cls-bord";
          else if (this.mapDpId[key] == this.DpId && !this.isGlobal)
            return "cls-bord";
          else return "cls-bord disabled";
        }
      }
    },
    mapClick: function() {
      //svg图单击事件
      this.setPort(0);
      this.setPort(1);
      this.setPort(2);
      this.setPort(3);
      this.setPort(6);
      this.setPort(4);
      this.setPort(5);
    },
    setPort: function(port) {
      //通过svg图单击跳转

      sessionStorage.setItem("indexClick", port);
      this.results.DockStateList.forEach(item => {
        if (item.PierFlag == port) {
          sessionStorage.setItem("fromMap", item.DP_ID);
        }
      });
      this.istabShow = "Dp";

      //跳转到
      var param = {
        PierFlag: port,
        isTopleavel: false,
        isSecend: true
      };

      if (this.DpId == "") {
        //总部切换到基层理货部
        var dockStateList = this.results.DockStateList;
        for (var i in dockStateList) {
          if (dockStateList[i].PierFlag == port) {
            this.DpId = dockStateList[i].DP_ID;
            this.DPName = dockStateList[i].DPName;
            this.isGlobal = false;

            this.initData();

            var delayboxH =
              $("#div-body").height() -
              $(".d-shipOver-boxTotal").height() -
              $("#shipOverSec").height() -
              10;
            $("#allData").css({
              height: delayboxH + "px"
            });
          }
        }
      } else {
        jsTools.SessionStorage.setVal(jsTools.Res.param, param);
        this.$router.push("/monitoring/vesselAllMonitorning");
      }
    },
    delayDetailShow: function() {
      //延迟开航预警详情
      this.isAlert = true;
      this.popupType = "dialog";
    },
    createPie: function() {
      //饼图初始化
      var that = this;
      if (pie1 == null) pie1 = echarts.init(document.getElementById("pie1"));

      if (pie2 == null) pie2 = echarts.init(document.getElementById("pie2"));

      if (pie3 == null) pie3 = echarts.init(document.getElementById("pie3"));

      if (pie4 == null) pie4 = echarts.init(document.getElementById("pie4"));

      if (pie5 == null) pie5 = echarts.init(document.getElementById("pie5"));

      var option1 = {
        color: ["rgba(21,209,255,1)", "rgba(19,91,122,0.3)"],
        title: {
          text: "箱号识别率",
          left: "center",
          top: "8%",
          textStyle: {
            color: "#14d2ff",
            fontSize: fontSizeAuto(0.23)
          }
        },
        series: [
          {
            name: "",
            type: "pie",
            hoverAnimation: false,
            center: ["50%", "55%"],
            radius: ["58%", "70%"],
            avoidLabelOverlap: false,
            label: {
              position: "center",
              normal: {
                show: false,
                position: "center"
              }
            },
            labelLine: {
              normal: {
                show: false
              }
            },
            data: [
              {
                value: that.NumRate.Right,
                label: {
                  normal: {
                    formatter: function(params) {
                      return that.NumRate.RightRate;
                    },
                    position: "center",
                    show: true,
                    textStyle: {
                      fontSize: fontSizeAuto(0.2),
                      fontWeight: "bold",
                      color: "#14d3ff"
                    }
                  }
                }
              },
              {
                value: that.NumRate.Wrong
              }
            ]
          }
        ]
      };
      var option2 = {
        color: ["rgba(36,113,251,1)", "rgba(13,44,108,1)"],
        title: {
          text: "箱型识别率",
          left: "center",
          top: "8%",
          textStyle: {
            color: "#1e67e8",
            fontSize: fontSizeAuto(0.23)
          }
        },
        series: [
          {
            name: "",
            type: "pie",
            hoverAnimation: false,
            //selectedMode: 'single',
            center: ["50%", "55%"],
            radius: ["58%", "70%"],
            avoidLabelOverlap: false,
            label: {
              position: "center",
              normal: {
                show: false,
                position: "center"
              }
            },
            labelLine: {
              normal: {
                show: false
              }
            },
            data: [
              {
                value: this.TypeRate.Right,
                label: {
                  normal: {
                    formatter: function(params) {
                      return that.TypeRate.RightRate;
                    },
                    position: "center",
                    show: true,
                    textStyle: {
                      fontSize: fontSizeAuto(0.2),
                      fontWeight: "bold",
                      color: "#0072FC"
                    }
                  }
                }
              },
              {
                value: this.TypeRate.Wrong
              }
            ]
          }
        ]
      };
      var option3 = {
        color: ["#e3c412", "#343b43"],
        title: {
          text: "箱位识别率",
          left: "center",
          top: "8%",
          textStyle: {
            color: "#e3c613",
            fontSize: fontSizeAuto(0.23)
          }
        },
        series: [
          {
            name: "",
            type: "pie",
            hoverAnimation: false,
            //selectedMode: 'single',
            center: ["50%", "55%"],
            radius: ["58%", "70%"],
            avoidLabelOverlap: false,
            label: {
              position: "center",
              normal: {
                show: false,
                position: "center"
              }
            },
            labelLine: {
              normal: {
                show: false
              }
            },
            data: [
              {
                value: this.PosRate.Right,
                label: {
                  normal: {
                    formatter: function(params) {
                      return that.PosRate.RightRate;
                    },
                    position: "center",
                    show: true,
                    textStyle: {
                      fontSize: fontSizeAuto(0.2),
                      fontWeight: "bold",
                      color: "#e3c412"
                    }
                  }
                }
              },
              {
                value: this.PosRate.Wrong
              }
            ]
          }
        ]
      };
      var option4 = {
        color: ["#e66418", "#0b2d6c"],
        title: {
          text: "箱位初始化率",
          left: "center",
          top: "8%",
          textStyle: {
            color: "#e66418",
            fontSize: fontSizeAuto(0.23)
          }
        },
        series: [
          {
            name: "",
            type: "pie",
            hoverAnimation: false,
            //selectedMode: 'single',
            center: ["50%", "55%"],
            radius: ["58%", "70%"],
            avoidLabelOverlap: false,
            label: {
              position: "center",
              normal: {
                show: false,
                position: "center"
              }
            },
            labelLine: {
              normal: {
                show: false
              }
            },
            data: [
              {
                value: this.InitialRate.Right,
                label: {
                  normal: {
                    formatter: function(params) {
                      return that.InitialRate.RightRate;
                    },
                    position: "center",
                    show: true,
                    textStyle: {
                      fontSize: fontSizeAuto(0.2),
                      fontWeight: "bold",
                      color: "#e66418"
                    }
                  }
                }
              },
              {
                value: this.InitialRate.Wrong
              }
            ]
          }
        ]
      };
      var option5 = {
        color: ["#ce665d", "#343b43"],
        title: {
          text: "人工干预率",
          left: "center",
          top: "8%",
          textStyle: {
            color: "#ce665d",
            fontSize: fontSizeAuto(0.23)
          }
        },
        series: [
          {
            name: "",
            type: "pie",
            hoverAnimation: false,
            //selectedMode: 'single',
            center: ["50%", "55%"],
            radius: ["58%", "70%"],
            avoidLabelOverlap: false,
            label: {
              position: "center",
              normal: {
                show: false,
                position: "center"
              }
            },
            labelLine: {
              normal: {
                show: false
              }
            },
            data: [
              {
                value: this.ArtificialRate.Right,
                label: {
                  normal: {
                    formatter: function(params) {
                      return that.ArtificialRate.RightRate;
                    },
                    position: "center",
                    show: true,
                    textStyle: {
                      fontSize: fontSizeAuto(0.2),
                      fontWeight: "bold",
                      color: "#ce665d"
                    }
                  }
                }
              },
              {
                value: this.ArtificialRate.Wrong
              }
            ]
          }
        ]
      };

      pie1.clear();
      pie2.clear();
      pie3.clear();
      pie4.clear();
      pie5.clear();
      pie1.setOption(option1, true);
      pie2.setOption(option2, true);
      pie3.setOption(option3, true);
      pie4.setOption(option4, true);
      pie5.setOption(option5, true);

      /*自适应高度*/
      $("#pie1,#pie2,#pie3,#pie4,#pie5").resize(function() {
        if (pie1 != null) pie1.resize();

        if (pie2 != null) pie2.resize();

        if (pie3 != null) pie3.resize();

        if (pie4 != null) pie4.resize();

        if (pie5 != null) pie5.resize();
      });
    },
    createPieGangs: function() {
      if (piegangs == null)
        piegangs = echarts.init(document.getElementById("piegangs"));

      var option6 = {
        color: [
          "#FFFF00",
          "#FF0000",
          "#4472C4",
          "#E7AB84",
          "#7030A0",
          "#57B52B"
        ],
        tooltip: {
          trigger: "item",
          formatter: "{b}:<br/>{c}({d}%)"
        },
        calculable: true,
        series: [
          {
            name: "出勤人数",
            type: "pie",
            center: ["45%", "58%"],
            radius: this.isGlobal ? ["20%", "60%"] : "55%",
            roseType: this.isGlobal ? "area" : false,
            data: this.results.DutyNumberList,
            label: {
              normal: {
                show: true,
                formatter: "{b}\n{c}",
                rich: {
                  b: {
                    fontSize: fontSizeAuto(0.3)
                  }
                },
                textStyle: {
                  fontWeight: "bold"
                }
              }
            },
            itemStyle: {
              emphasis: {
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: "rgba(0, 0, 0, 0.5)"
              }
            },
            labelLine: {
              length: 8
            }
          }
        ]
      };
      piegangs.clear();
      piegangs.setOption(option6, true);

      $("#piegangs").resize(function() {
        if (piegangs != null) piegangs.resize();
      });
    },
    delayClass: function(ret) {
      if (ret.Data == "0") {
        return "d-blue";
      } else if (ret.Data == "1" || ret.Data == "2") {
        return "d-orange";
      } else {
        return "d-red";
      }
    },
    postClass: function(ret) {
      switch (ret.StaticType) {
        case 0:
          return "d-yellow";
        case 1:
          return "d-red";
        case 2:
          return "d-disply-none";
        case 3:
          return "d-green";
        case 4:
          return "d-blue";
        case 5:
          return "d-pink";
        case 7:
          return "d-purple";
        case 99:
          return "d-othercolor";
        default:
          return "d-disply-none";
      }
    },
    weatherIcon: function(ret) {
      if (ret == null || ret.WeatherType == null) return "";

      if (ret.WeatherType == 0) return "icon-weather-sunny";
      else if (ret.WeatherType == 1) return "icon-weather-hot";
      else if (ret.WeatherType == 2) return "icon-weather-hail";
      else if (ret.WeatherType == 3) return "icon-weather-cloudy";
      else if (ret.WeatherType == 4) return "icon-weather-overcast";
      else if (ret.WeatherType == 5) return "icon-weather-gale";
      else if (ret.WeatherType == 6) return "icon-weather-typhoon";
      else if (ret.WeatherType == 7) return "icon-weather-smallrain";
      else if (ret.WeatherType == 8) return "icon-weather-middlerain";
      else if (ret.WeatherType == 9) return "icon-weather-largerain";
      else if (ret.WeatherType == 10) return "icon-weather-smallsnow";
      else if (ret.WeatherType == 11) return "icon-weather-middlesnow";
      else if (ret.WeatherType == 12) return "icon-weather-largersnow";
      else return null;
    },

    getMonitorInfo() {
        let that = this;
      if (this.isGlobal) {
        //公司码头总览
        var dat = {
          serviceName: jsRes.Server.GetAllMonitorService,
          data: {
            Parameter: null
          }
        };
      } else {
        //单个码头总览
        var dat = {
          serviceName: jsRes.Server.GetDPMonitorService,
          data: {
            Parameter: this.DpId
          }
        };
      }

      jsTools.ajax(dat, result => {
        result.DockStateList.forEach(item => {
          //地图颜色对应
          that.mapItem[item.PierFlag] = item.Data;
          that.mapDpId.push(item.DP_ID); //地图的部门ID
        });
        that.DispatchNumberList = [];
        result.DispatchNumberList.map(item => {
          if (
            item.StaticType == "0" ||
            item.StaticType == "1" ||
            item.StaticType == "4" ||
            item.StaticType == "5" ||
            item.StaticType == "7" ||
            item.StaticType == "99"
          ) {
            that.DispatchNumberList.push(item);
          }
        });
        that.results = {};
        that.results = result;

        if (!that.isGlobal) {
          //完好率从80%开始
          if (
            result.EPIntactRate.EPIntactData != null &&
            result.EPIntactRate.EPIntactData != 0
          ) {
            var epPercent = (result.EPIntactRate.EPIntactData - 0.8) / 0.2;
            that.results.EPIntactRate.EPIntactPercent =
              epPercent.toFixed(2) * 100 + "%";
            that.results.EPIntactRate.EPFailPercent =
              (1 - epPercent).toFixed(2) * 100 + "%";
          }
        }
        that.createPieGangs();
      });
    },

    getNotice() {
      //获取公告
      var dat = {
        serviceName: jsRes.Server.TopNoticeShowService,
        data: {
          Parameter: {
            DpId: this.DpId,
            IsPage: 0
          }
        }
      };

      jsTools.ajax(dat, result => {
        this.NoticeList = result.NoticeList;
      });
    },

    getGetTallyTeu() {

      //获取TEU
      var dat = {
        serviceName: jsRes.Server.GetTallyTeuService,
        data: {
          Parameter: this.DpId
        }
      };

      jsTools.ajax(dat, result => {
        this.TallyTeu = result;
        console.log(this.TallyTeu.YearTallyTeuD);
        countnum = this.TallyTeu.YearTallyTeuD - this.TallyTeu.IntervalCount;
        console.log(this.TallyTeu.YearTallyTeuD);
        console.log(this.TallyTeu.IntervalCount);
        this.show_num();
        //					this.AllTeu.YearTallyTeu = this.TallyTeu.YearTallyTeuD;
        //					this.AllTeu.CompletionRate = (this.AllTeu.YearTallyTeu * 100 / (this.AllTeu.AnnualIndicators * 10000)).toFixed(2) + '%';
      });
    },

    getIndentifyRate() {
      //获取识别率
      var dat = {
        serviceName: jsRes.Server.GetIndentifyRateService,
        data: {
          Parameter: this.DpId
        }
      };

      jsTools.ajax(dat, result => {
        this.NumRate = result.NumRate;
        this.TypeRate = result.TypeRate;
        this.PosRate = result.PosRate;
        this.InitialRate = result.InitialRate;
        this.ArtificialRate = result.ArtificialRate;
        this.createPie();
      });
    },

    getMainWeatherList() {
      var dat = {
        serviceName: jsRes.Server.WeatherQueryService,
        data: {
          Parameter: {
            WeaDateStart: new Date().format("yyyy-MM-dd"),
            WeaDateEnd: new Date().format("yyyy-MM-dd 23:59:59")
          }
        }
      };

      jsTools.ajax(dat, result => {
        this.weatherInfo = result.WeatherList[0];
      });
    },
    show_num() {
      if (this.TallyTeu.IntervalCount == null)
        this.TallyTeu.IntervalCount = 300;
      var n = Math.round(this.TallyTeu.IntervalCount / 60);
      console.log(n);
      if (countnum != null) {
        countnum = Math.round(countnum) + Math.round(Math.random() * (n + 1));

        if (countnum > this.TallyTeu.YearTallyTeuD)
          countnum = Math.round(this.TallyTeu.YearTallyTeuD);
        this.countnum = countnum;
        //flopNumber(countnum);
      }
    },
    initData() {
            this.getMainWeatherList();
            this.getMonitorInfo();
            this.getNotice();
            this.getIndentifyRate();
            this.getGetTallyTeu(); 

            initCount("PlanYearNumber");
            initCount("YearTallyTeu");
            initCount("QuarTallyTeu");
            initCount("MonthTallyTeu");
            initCount("DayTallyTeu");      
    },
    initSize() {
      //公告区域高度自适应
      var noticeH =
        $("#div-body").height() -
        $(".d-shipOver-date").height() -
        $(".d-shipOver-gangs").height() -
        41;

      $("#notice").css({
        height: noticeH + "px"
      });

      $("#map .mapwrap").css({
        top: "-10%"
      });

      if ($("#map").height() < 350) {
        $("#map .mapwrap").css({
          top: "-22%"
        });
      }

      if ($("#map").height() > 440) {
        $("#map .mapwrap").css({
          top: "-4%"
        });
      }

      if ($("#map").height() > 540) {
        $("#map .mapwrap").css({
          bottom: "10%",
          top: "-10%"
        });

        $("#map .mapwrap svg").css({
          width: "100%"
        });
      }

      if ($("#map").height() > 600) {
        $("#map .mapwrap").css({
          top: "-4%"
        });
      }
      var delayboxH =
        $("#div-body").height() -
        $(".d-shipOver-boxTotal").height() -
        $("#shipOverSec").height() -
        50;
      if (this.istabShow == "Dp") {
        $("#allData").css({
          height: delayboxH + "px"
        });
      }
    }
  }
};

function initCount(el) {
  var c = new CountUp(el, 0, 999, 2, 10);
  c.start();
}

function fontSizeAuto(res) {
  //字体大小自适应
  var docEl = document.documentElement,
    clientWidth =
      window.innerWidth ||
      document.documentElement.clientWidth ||
      document.body.clientWidth;
  if (!clientWidth) return;
  var fontSize = 100 * (clientWidth / 1920);
  return res * fontSize;
}
</script>

<style>
.disabled {
  pointer-events: none !important;
}

.d-pubBody .d-popupBox {
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

.d-popupBox .d-body {
  width: 60%;
  margin-top: 10%;
}
/* 地图样式相关 */

@keyframes fade {
  from {
    r: 8;
    opacity: 1;
  }
  50% {
    r: 20;
    opacity: 0.8;
  }
  to {
    r: 8;
    opacity: 1;
  }
}
/* 地图相关样式 */

.mapwrap {
  width: 128%;
  height: 100%;
  position: absolute;
  left: -16%;
  top: -5%;
}

.cls-7bord {
  fill: rgb(255, 210, 0, 0.2) !important;
}

.cls-red {
  fill: #9e1f24 !important;
}

.cls-red:hover,
.cls-redbord:hover,
.cls-redbord:hover + .st7 {
  cursor: pointer;
  transition: all 0.2s ease;
  fill: rgb(158, 31, 36, 1) !important;
  color: rgb(158, 31, 36, 1);
  font-size: 2.1rem;
  font-weight: bold;
}
/*翻牌文字*/

#YearTallyTeuOne .t_num {
  display: block;
}

#YearTallyTeuOne .t_num i {
  width: 28px;
  height: 45px;
  display: inline-block;
  background: url(/static/Images/pub/bg_number.png) no-repeat center;
  background-position: 0 0;
}

#YearTallyTeuOne .d-serial {
  width: 28px;
  height: 45px;
  display: inline-block;
  background: url(/static/Images/pub/bg_num_symble.png) no-repeat center;
}
.d-echart-legend ul li {
  padding: 0;
}
.d-othercolor {
  background: #137ed9;
}
</style>